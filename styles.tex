%% ====================================================================
%% Comprehensive LaTeX style.tex file
%% ====================================================================

\usepackage[usenames,dvipsnames]{xcolor}

\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}

\usepackage{typearea, geometry}
\usepackage{scrlayer-scrpage}

\usepackage{float, wrapfig, picinpar, siunitx, derivative, lastpage, textcomp, nicefrac}
\usepackage{url, interval, calc, framed, fancybox, quoting, empheq, algorithm, stackrel}
\usepackage{longtable, tabu}
\usepackage{xpatch}
\usepackage{stackengine}
% \usepackage{sectsty}

\usepackage[obeyFinal,textsize=scriptsize,shadow,loadshadowlibrary]{todonotes}
\usepackage{multirow}
\usepackage{ellipsis} % don't use ugly unicode ellipsis
\usepackage{epigraph}
\renewcommand{\epigraphsize}{\scriptsize}
\renewcommand{\epigraphwidth}{60ex}
\usepackage{chemfig}

\usepackage{algpseudocode}
\algrenewcommand\algorithmicprocedure{\textbf{function}}
\algrenewcommand{\algorithmiccomment}[1]{\hskip3em$\triangleright$ #1}

\usepackage{hyperref}
\hypersetup{colorlinks=true,urlcolor=RubineRed,linkcolor=RoyalBlue,citecolor=ForestGreen,filecolor=Magenta}

\usepackage{pgfplots}
\pgfplotsset{compat=1.18}

\usepackage{amsmath, amsopn, multicol, enumerate, tikz, bbding, tikz-3dplot, tikz-cd}
\usepackage{upgreek, bold-extra, mathrsfs, tensor}
\usetikzlibrary{shapes, calendar, matrix, backgrounds, folding, knots, fadings, shadows}
\usetikzlibrary{decorations.markings, calc, arrows, petri, topaths, decorations.pathreplacing}
\usetikzlibrary{arrows.meta,bending,positioning}
\usetikzlibrary{graphs, graphs.standard}
\usetikzlibrary{patterns}
\usetikzlibrary{shapes.geometric}
\usepackage{chessfss, adjustbox}

\usepackage{amsthm}
\usepackage{thmtools}

\usepackage[font=small,labelsep=none]{caption}
\usepackage{subfig, mathdots}

\usepackage[framemethod=TikZ]{mdframed}
\usepackage{bbm}

% \usepackage[e]{esvect}
\usepackage[makeroom]{cancel}

%=== loading symbols ===
\newcommand{\eins}{\ensuremath{\mathbbm{1}}}

\usepackage{amsfonts, amssymb, esint}


\usepackage{listings,lstautogobble}
\lstset{
    keywordstyle=\color{blue}
  , basicstyle=\ttfamily\footnotesize\bfseries
  , commentstyle={}
  , columns=fullflexible
  , numbers=left
  , showstringspaces=false
  , keepspaces=true
  , xleftmargin=.2\textwidth
  , xrightmargin=.2\textwidth
  , frame=tb
  }

\AtBeginDocument{\setlength{\abovedisplayshortskip}{2pt}}%
\AtBeginDocument{\setlength{\belowdisplayshortskip}{4pt}}%
\AtBeginDocument{\setlength{\abovedisplayskip}{4pt}}%
\AtBeginDocument{\setlength{\belowdisplayskip}{4pt}}%

%% tikz
\tikzset{%
extended line/.style={shorten >=-#1,shorten <=-#1},%
extended line/.default=.5cm,%
wpoint/.style={circle, inner sep=0pt, minimum size=4pt, fill=white, draw},%
bpoint/.style={circle, inner sep=0pt, minimum size=4pt, fill=black, draw},%
rpoint/.style={circle, inner sep=0pt, minimum size=4pt, fill=red, draw},%
}

\addtokomafont{disposition}{\rmfamily}

\usepackage[shortlabels]{enumitem}
% \setlist[enumerate]{itemsep=0.1pt, parsep=0pt, topsep=1pt, labelindent=0.1in, leftmargin=* }
% \setlist[itemize]{itemsep=0.1pt, parsep=0pt, topsep=1pt, labelindent=0.1in, leftmargin=* }
% \setlist[description]{itemsep=0.1pt, parsep=0pt, topsep=1pt, labelindent=0.1in, leftmargin=*, font=\normalfont\bfseries }
\setlist[description]{font=\normalfont\bfseries }

\setlist[itemize,1]{}
\setlist[description,1]{}
\setlist[enumerate,1]{label=(\emph{\alph*}), ref=\alph*}
\setlist[enumerate,2]{label=(\emph{\roman*}), ref=\roman*}
\setlist[enumerate,3]{label=(\emph{\arabic*}), ref=\arabic*}
\setlist[enumerate,4]{label=(\emph{\roman*}), ref=\roman*}

% \newenvironment{enumI}{\begin{itemize}}{\end{itemize}}
\newenvironment{enum}{\begin{enumerate}[label=(\alph*), ref=\alpha*]}{\end{enumerate}}
\newenvironment{enuma}{\begin{enumerate}[label=(\alph*), ref=\alpha*]}{\end{enumerate}}
\newenvironment{enumaI}{\begin{enumerate}}{\end{enumerate}}
\newenvironment{enumn}{\begin{enumerate}[label=(\arabic*), ref=\arabic*]}{\end{enumerate}}
\newenvironment{enumrB}{\begin{enumerate}[label=(\emph{\roman*}), ref=\roman*]}{\end{enumerate}}
\newenvironment{enumr}{\begin{enumerate}[label=({\roman*}), ref=\roman*]}{\end{enumerate}}
\newenvironment{enumR}{\begin{enumerate}[label=({\Roman*}), ref=\Roman*]}{\end{enumerate}}


\setlength{\headheight}{1.25\baselineskip}
\setlength{\headsep}{0.5\baselineskip}
\setlength{\footskip}{2.5\baselineskip}
\setlength{\footnotesep}{0.75\baselineskip}

% Shift foot down
\ModifyLayer[addvoffset=.6ex]{scrheadings.foot.odd}
\ModifyLayer[addvoffset=.6ex]{scrheadings.foot.even}
\ModifyLayer[addvoffset=.6ex]{scrheadings.foot.oneside}
\ModifyLayer[addvoffset=.6ex]{plain.scrheadings.foot.odd}
\ModifyLayer[addvoffset=.6ex]{plain.scrheadings.foot.even}
\ModifyLayer[addvoffset=.6ex]{plain.scrheadings.foot.oneside}

%\setlength{\parindent}{0cm}
\setlength{\parskip}{3pt plus0pt minus2pt}

%% === Experimental ===
%%\linespread{0.95}
\setlength{\multicolsep}{2.0pt plus 0pt minus 0pt}
\newenvironment{twocols}[1][]{\begin{multicols}{2}}{\end{multicols}\vspace{-5pt}}

\newcounter{probCounter}
\setcounter{probCounter}{0}

%% ===
\newcommand{\NP}{\textsc{np}}
\newcommand{\iid}{\textsc{iid}}
\DeclareMathOperator{\idsc}{\ensuremath{\textsc{id}}}
\DeclareMathOperator{\id}{\ensuremath{id}}
\newcommand{\pid}{\textsc{pid}}

\newcommand{\ignore}[1]{}

\DeclareMathAlphabet{\mathrsfs}{U}{rsfso}{m}{n}
\DeclareMathAlphabet{\mathssss}{U}{rsfs}{m}{n}
\newcommand{\mb}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\mbi}[1]{\ensuremath{\mathbfit{#1}}}
\newcommand{\mc}[1]{\ensuremath{\mathcal{#1}}}
\newcommand{\mf}[1]{\ensuremath{\mathbb{#1}}}
\newcommand{\mk}[1]{\ensuremath{\mathfrak{#1}}}
\newcommand{\mv}[1]{\ensuremath{\boldsymbol{#1}}}
\newcommand{\me}[1]{\ensuremath{\mathscr{#1}}}
\newcommand{\ms}[1]{\ensuremath{\mathrsfs{#1}}}
\newcommand{\mh}[1]{\ensuremath{\mathssss{#1}}}


\newcommand{\NN}{\ensuremath{\mathbb{N}}}
\newcommand{\RR}{\ensuremath{\mathbb{R}}}
\newcommand{\ZZ}{\ensuremath{\mathbb{Z}}}
\newcommand{\QQ}{\ensuremath{\mathbb{Q}}}
\newcommand{\FF}{\ensuremath{\mathbb{F}}}
\newcommand{\PP}{\ensuremath{\mathbb{P}}}
\newcommand{\EE}{\ensuremath{\mathbb{E}}}
\newcommand{\CC}{\ensuremath{\mathbb{C}}}
\newcommand{\RP}{\ensuremath{\mathbb{RP}}}

\newcommand{\cro}{\ensuremath{^{\times}}}
\newcommand{\transp}{\ensuremath{^\top}}
\newcommand{\inv}{\ensuremath{^{-1}}}
\newcommand{\icr}{\ensuremath{^{\times}}}
\newcommand{\img}{\ensuremath{^{\varto}}}
\newcommand{\pimg}{\ensuremath{^{\varleftarrow}}}
\newcommand{\cp}{\ensuremath{^{\complement}}}
\newcommand{\defeq}{\ensuremath \stackrel{\Delta}{=}}

\newcommand{\delimit}[4]{
	\ifcase #1
		\mathopen{}\left#2 #3 \right#4\mathclose{}
		\or #2 #3 #4
		\or \bigl#2 #3 \bigr#4
		\or \Bigl#2 #3 \Bigr#4
		\or \biggl#2 #3 \biggr#4
		\or \Biggl#2 #3 \Biggr#4
	\fi
}

%Generalize builder with a bar
\newcommand{\delb}[5]{
	\delimit{#1}{#2}{
		#3
		\ifcase #1
			\ \middle|\
			\or \mid
			\or \bigm|
			\or \Bigm|
			\or \biggm|
			\or \Biggm|
		\fi
		#4
	}{#5}
}

%Generalize builder with a colon
\newcommand{\delc}[5]{
	\delimit{#1}{\mathopen{#2}}{
		#3
		\ifcase #1
			:
			\or :
			\else \,:\,
		\fi
		#4
	}{\mathclose{#5}}
}

\usepackage{commath}
\newcommand{\degrees}{\ensuremath{^{\circ}}}
\newcommand{\iter}[1]{\ensuremath{^{\circ #1}}}
\newcommand{\nder}[1]{\ensuremath{^{\left(#1\right)}}}
\newcommand{\setc}[3][0]{\delb{#1}{\{}{#2}{#3}{\}}}
\renewcommand{\set}[2][0]{\delimit{#1}{\{}{#2}{\}}}
\renewcommand{\norm}[2][0]{\delimit{#1}{\lVert}{#2}{\rVert}}
\renewcommand{\abs}[2][0]{\delimit{#1}{|}{#2}{|}}
\newcommand{\angbr}[2][0]{\delimit{#1}{\langle}{#2}{\rangle}}

\newcommand{\bra}[2][0]{\delimit{#1}{\langle}{#2}{|}}
\newcommand{\ket}[2][0]{\delimit{#1}{|}{#2}{\rangle}}
\newcommand{\braket}[3][0]{\delb{#1}{\langle}{#2}{#3}{\rangle}}
\newcommand{\angbrc}[3][0]{\delb{#1}{\langle}{#2}{#3}{\rangle}}

\newcommand{\Angbr}[2][0]{\delimit{#1}{\lAngle}{#2}{\rAngle}}
\newcommand{\dbr}[2][0]{\delimit{#1}{\lBrack}{#2}{\rBrack}}
\newcommand{\floor}[2][0]{\delimit{#1}{\lfloor}{#2}{\rfloor}}
\newcommand{\ceil}[2][0]{\delimit{#1}{\lceil}{#2}{\rceil}}
\newcommand{\pair}[2][0]{\delimit{#1}{(}{#2}{)}}
\newcommand{\pairc}[3][0]{\delb{#1}{(}{#2}{#3}{)}}
\newcommand{\lopen}[2][0]{\delimit{#1}{]}{#2}{]}}
\newcommand{\ropen}[2][0]{\delimit{#1}{[}{#2}{[}}
\newcommand{\bopen}[2][0]{\delimit{#1}{]}{#2}{[}}

\DeclareMathOperator{\GF}{\ensuremath{\mathrm{GF}}}
\DeclareMathOperator{\E}{\ensuremath{\mathsf{E}}}
\DeclareMathOperator{\var}{\ensuremath{\mathsf{Var}}}
\DeclareMathOperator{\pr}{\ensuremath{\mathsf{Pr}}}
\DeclareMathOperator{\varvar}{\ensuremath{\mathrm{Var}}}
\DeclareMathOperator{\Gal}{\ensuremath{Gal}}
\DeclareMathOperator{\ch}{\ensuremath{ch}}
\DeclareMathOperator{\Ub}{\ensuremath{Ub}}
\DeclareMathOperator{\Lb}{\ensuremath{Lb}}
\DeclareMathOperator{\Ann}{\ensuremath{Ann}}
\DeclareMathOperator{\sf}{\ensuremath{sf}}
\DeclareMathOperator{\ord}{\ensuremath{ord}}
\DeclareMathOperator{\lip}{\ensuremath{lip}}
\DeclareMathOperator{\dvg}{\ensuremath{div}}
\DeclareMathOperator{\len}{\ensuremath{len}}
\DeclareMathOperator{\Perm}{\ensuremath{Perm}}
\DeclareMathOperator{\lcm}{\ensuremath{lcm}}
\DeclareMathOperator{\pdf}{\ensuremath{pdf}}
\DeclareMathOperator{\cdf}{\ensuremath{cdf}}
\DeclareMathOperator{\nul}{\ensuremath{null}}
\DeclareMathOperator{\Span}{\ensuremath{span}}
\DeclareMathOperator{\Ker}{\ensuremath{ker}}
\DeclareMathOperator{\Adj}{\ensuremath{Adj}}
\DeclareMathOperator{\proj}{\ensuremath{proj}}
\DeclareMathOperator{\sech}{\ensuremath{sech}}
\DeclareMathOperator{\Supp}{\ensuremath{Supp}}
\DeclareMathOperator{\Ind}{\ensuremath{Ind}}
\DeclareMathOperator{\Stab}{\ensuremath{Stab}}
\DeclareMathOperator{\Dih}{\ensuremath{Dih}}
\DeclareMathOperator{\cis}{\ensuremath{cis}}
\DeclareMathOperator{\atan2}{\ensuremath{atan2}}
\DeclareMathOperator{\sinc}{\ensuremath{sinc}}
\DeclareMathOperator{\avg}{\ensuremath{avg}}
\DeclareMathOperator{\dist}{\ensuremath{dist}}
\DeclareMathOperator{\diam}{\ensuremath{diam}}
\DeclareMathOperator{\Sub}{\ensuremath{Sub}}
\DeclareMathOperator{\Lin}{\ensuremath{Lin}}
\DeclareMathOperator{\Mat}{\ensuremath{Mat}}
\DeclareMathOperator{\Hom}{\ensuremath{Hom}}
\DeclareMathOperator{\Hol}{\ensuremath{Hol}}
\DeclareMathOperator{\Mer}{\ensuremath{Mer}}
\DeclareMathOperator{\diag}{\ensuremath{diag}}
\DeclareMathOperator{\End}{\ensuremath{End}}
\DeclareMathOperator{\rng}{\ensuremath{Rng}}
\DeclareMathOperator{\range}{\ensuremath{range}}
\DeclareMathOperator{\cod}{\ensuremath{Cod}}
\DeclareMathOperator{\dom}{\ensuremath{Dom}}
\DeclareMathOperator{\tr}{\ensuremath{tr}}
\DeclareMathOperator{\itr}{\ensuremath{int}}
\DeclareMathOperator{\Ext}{\ensuremath{Ext}}
\DeclareMathOperator{\Clo}{\ensuremath{Clo}}
\DeclareMathOperator{\gr}{\ensuremath{Gr}}
\DeclareMathOperator{\cl}{\ensuremath{cl}}
\DeclareMathOperator{\fr}{\ensuremath{fr}}
\DeclareMathOperator{\Bdy}{\ensuremath{Bdy}}
\DeclareMathOperator{\Acc}{\ensuremath{acc}}
\DeclareMathOperator{\Int}{\ensuremath{Int}}
\DeclareMathOperator{\Spin}{\ensuremath{Spin}}
\DeclareMathOperator{\So}{\ensuremath{SO}}
\DeclareMathOperator{\SU}{\ensuremath{SU}}
\DeclareMathOperator{\curl}{\ensuremath{curl}}
\DeclareMathOperator{\grad}{\ensuremath{grad}}
\DeclareMathOperator{\rad}{\ensuremath{rad}}
\DeclareMathOperator{\dil}{\ensuremath{dil}}
\DeclareMathOperator{\cof}{\ensuremath{cof}}
\DeclareMathOperator{\area}{\ensuremath{area}}
\DeclareMathOperator{\vol}{\ensuremath{vol}}
\DeclareMathOperator{\Sym}{\ensuremath{Sym}}
\DeclareMathOperator{\Tor}{\ensuremath{Tor}}
\DeclareMathOperator{\Syl}{\ensuremath{Syl}}
\DeclareMathOperator{\Corr}{\ensuremath{Corr}}
\DeclareMathOperator{\Cov}{\ensuremath{Cov}}
\DeclareMathOperator{\idm}{\ensuremath{id}}
\DeclareMathOperator{\polylog}{\ensuremath{polylog}}
\DeclareMathOperator{\rank}{\ensuremath{rank}}
\DeclareMathOperator{\nullity}{\ensuremath{nullity}}
\DeclareMathOperator{\sign}{\ensuremath{sign}}
\DeclareMathOperator{\Aut}{\ensuremath{Aut}}
\DeclareMathOperator{\Inn}{\ensuremath{Inn}}
\DeclareMathOperator{\GL}{\ensuremath{GL}} % General linear group
\DeclareMathOperator{\SL}{\ensuremath{SL}} % Special linear group
\DeclareMathOperator{\Vol}{\ensuremath{Vol}} % Special linear group
\DeclareMathOperator{\re}{\ensuremath{re}}
\DeclareMathOperator{\im}{\ensuremath{im}}

% Inverse hyperbolic
\DeclareMathOperator{\artanh}{\ensuremath{artanh}}
\DeclareMathOperator{\arcosh}{\ensuremath{arcosh}}
\DeclareMathOperator{\arsinh}{\ensuremath{arsinh}}
\DeclareMathOperator{\arcoth}{\ensuremath{arcoth}}
\DeclareMathOperator{\arsech}{\ensuremath{arsech}}
\DeclareMathOperator{\arcsch}{\ensuremath{arcsch}}
\DeclareMathOperator{\ffrac}{\ensuremath{frac}}

%% Statistics command
\DeclareMathOperator{\Norm}{\ensuremath{\mathsf{Norm}}}
\DeclareMathOperator{\Bin}{\ensuremath{\mathsf{Bin}}}
\DeclareMathOperator{\Bern}{\ensuremath{\mathsf{Bern}}}
\DeclareMathOperator{\Poi}{\ensuremath{\mathsf{Poi}}}
\DeclareMathOperator{\Geo}{\ensuremath{\mathsf{Geo}}}
\DeclareMathOperator{\Unif}{\ensuremath{\mathsf{Unif}}}
\DeclareMathOperator{\Pare}{\ensuremath{\mathsf{Pare}}}
\DeclareMathOperator{\Wern}{\ensuremath{\mathsf{Wern}}}
\DeclareMathOperator{\Beta}{\ensuremath{\mathsf{Beta}}}

\newcommand{\symdiff}{\bigtriangleup}

\newcommand{\examhead}[6]{
	\begin{center}
	{{\large \fbox{\parbox{0.98\textwidth}{
		\hbox to \hsize{#1 \hfil #2} \vskip 0.075in
		\hbox to \hsize{#3 \hfil #4} \vskip 0.075in
		\hbox to \hsize{#5 \hfil #6}
	}}}}
	\end{center}
	\vspace{-1em} }

\newcommand{\srudhead}[4]{

	\begin{center}
	{\textsf {\large \fbox{\parbox{0.98\textwidth}{
		\hbox to \hsize{#1 \hfil #2} \vskip 0.075in
		\hbox to \hsize{#3 \hfil #4}
	}}}}
	\end{center}
	\vspace{-1em} }

\newcommand{\rudhead}[4]{

	\begin{center}
	{ {\large \fbox{\parbox{0.98\textwidth}{
		\hbox to \hsize{#1 \hfil #2} \vskip 0.075in
		\hbox to \hsize{#3 \hfil #4}
	}}}}
	\end{center}
	\vspace{-1em} }

\newcommand{\drudhead}[4]{
	\begin{center}
	{\textbf{\large { {\parbox{1\textwidth}{
		\hbox to \hsize{#1 \hfil #2} \vskip 0.075in
		\hbox to \hsize{#3 \hfil #4}
	}}}}
	\raisebox{-5pt}[0pt][0pt]{\rule{\linewidth}{0.75pt}}
	}
	\end{center}
	\vspace{-1em}
}

\newcommand{\mysetminusD}{\hbox{\tikz{\draw[line width=0.4pt,line cap=round] (3pt,0) -- (0,6pt);}}}
\newcommand{\mysetminusT}{\mysetminusD}
\newcommand{\mysetminusS}{\hbox{\tikz{\draw[line width=0.25pt,line cap=round] (2pt,0) -- (0,4pt);}}}
\newcommand{\mysetminusSS}{\hbox{\tikz{\draw[line width=0.2pt,line cap=round] (1.5pt,0) -- (0,3pt);}}}
\newcommand{\mysetminus}{\mathbin{\mathchoice{\mysetminusD}{\mysetminusT}{\mysetminusS}{\mysetminusSS}}}
\newcommand{\varsetminus}{\mathbin{\backslash}}

\newcommand{\parte}[1]{\vspace{2\parskip}\noindent{\color{Cerulean}\textbf{{{\ifthenelse{\equal{#1}{}}{\textsf{Part:}}{\textsf{Part} {\textcolor{Black}{\textsf{#1}}}{.}}}}}}}
\newcommand{\prob}[1]{\vspace{2\parskip}\noindent{\color{BrickRed}\textbf{{{\ifthenelse{\equal{#1}{}}{\textsf{Problem:}}{\textsf{Problem} {\textcolor{Black}{\textsf{#1}}}{.}}}}}} \stepcounter{probCounter}}
\newcommand{\soln}[1]{\noindent{\textbf{{{\ifthenelse{\equal{#1}{}}{{{Solution:}}}{{{Solution}} {\textcolor{Black}{#1}}{.}}}}}}}

\newcommand{\iprod}[1]{\prod_{#1}^\infty}
\newcommand{\isum}[1]{\sum_{#1}^\infty}
\newcommand{\ilim}[1]{\lim_{#1\to\infty}}
\newcommand{\seq}[1]{#1_1,\dotsc,#1_n}

\newcommand{\shownum}{\addtocounter{equation}{1}\tag{\theequation}}
\usepackage{array}
\newcolumntype{x}[1]{>{\centering\arraybackslash\hspace{0pt}}p{#1}}
\renewcommand{\arraystretch}{1}
\newcommand{\w}{\hspace*{-3pt}}

%% ==== Custom macro ===
\newcommand{\eps}{\varepsilon}
\newcommand{\ol}{\overline}
\newcommand{\ul}{\underline}
\newcommand{\wt}{\widetilde}
\newcommand{\wh}{\widehat}

\newcommand{\cycsum}{\sum_{\mathrm{cyc}}}
\newcommand{\symsum}{\sum_{\mathrm{sym}}}
\newcommand{\cycprod}{\prod_{\mathrm{cyc}}}
\newcommand{\symprod}{\prod_{\mathrm{sym}}}

%% ==== Arcs
\newcommand{\arc}[1]{%
  \setbox9=\hbox{\ensuremath{#1}}%
  \ooalign{\raisebox{8pt}{\resizebox{\wd9}{\height}{\ensuremath{\frown}}}\cr\ensuremath{#1}}}

\newcommand{\intentblank}{
\vspace*{\fill}%
\begin{center}%
This page is intentionally left blank.%
\end{center}%
\vspace{\fill}
}

\newcommand*\Laplace{\mathop{}\!\mathbin\bigtriangleup}
\newcommand*\DAlambert{\mathop{}\!\mathbin\Box}
\newcommand{\powerset}{\raisebox{.15\baselineskip}{\Large\ensuremath{\wp}}}

\lstdefinestyle{customCodeList}{
  belowcaptionskip=1\baselineskip,
  breaklines=true,
  frame=L,
  xleftmargin=\parindent,
  showstringspaces=false,
  basicstyle=\footnotesize\ttfamily,
  keywordstyle=\bfseries\color{green!40!black},
  commentstyle=\itshape\color{purple!40!black},
  identifierstyle=\color{blue},
  stringstyle=\color{orange},
}

\usepackage{tkz-euclide, tkz-graph}
\usepackage[most]{tcolorbox}

\mdfdefinestyle{mdbox}{%
  linewidth=2pt,
  skipabove=10pt,
  innertopmargin=5pt,
  innerbottommargin=5pt,
  skipbelow=4pt,
  frametitlefont=\bfseries,
  nobreak=true,
  rightline=false,
  leftline=true,
  topline=false,
  bottomline=false
}

\mdfdefinestyle{mdbluebox}{%
  style=mdbox,
  linecolor=MidnightBlue,
  backgroundcolor=TealBlue!5,
}

\declaretheoremstyle[
  headfont=\sffamily\bfseries\color{MidnightBlue!70!black},
  mdframed={style=mdbluebox},
  % bodyfont=\itshape,
  spaceabove=2pt,
  spacebelow=2pt,
  % postheadspace={0pt}
]{thmbluebox}

\mdfdefinestyle{mdgreenbox}{%
  style=mdbox,
  linecolor=ForestGreen,
  backgroundcolor=ForestGreen!5,
}

\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{ForestGreen!70!black},
  mdframed={style=mdgreenbox},
  bodyfont=\normalfont,
  spaceabove=2pt,
  spacebelow=2pt,
]{thmgreenbox}

\mdfdefinestyle{mdredbox}{%
  style=mdbox,
  backgroundcolor=CarnationPink!5,
  linecolor=CarnationPink,
}

\declaretheoremstyle[
  headfont=\bfseries\color{CarnationPink},
  mdframed={style=mdredbox},
  bodyfont=\normalfont,
  spaceabove=2pt,
  spacebelow=2pt,
  % headpunct={---},
  % postheadspace={0pt},
]{thmredbox}


\mdfdefinestyle{mdblackbox}{%
  style=mdbox,
  linecolor=black,
  backgroundcolor=RedViolet!5!gray!5,
}

\declaretheoremstyle[
  headfont=\bfseries,
  mdframed={style=mdredbox},
  bodyfont=\normalfont,
  spaceabove=2pt,
  spacebelow=1pt,
]{thmblackbox}


\mdfdefinestyle{mdpurplebox}{%
  style=mdbox,
  shadow=true,
  shadowsize=2pt,
  backgroundcolor=Orchid!10,
  frametitlebackgroundcolor=Violet!50!black,
  frametitlefont=\bfseries\sffamily\color{white},
  frametitlerule=true,
}

\mdfdefinestyle{mdroyalbluebox}{%
  style=mdbox,
  backgroundcolor=RoyalBlue!10,
  shadow=true,
  shadowsize=6pt,
  shadowcolor=black!30,
  frametitlebackgroundcolor=RoyalBlue!50!black,
  frametitlefont=\bfseries\sffamily\color{white},
  frametitlerule=true,
}

\declaretheoremstyle[
  headfont=\sffamily\bfseries\color{Violet},
  mdframed={style=mdpurplebox},
  spaceabove=2pt,
  spacebelow=1pt,
]{thmpurplebox}

\mdfdefinestyle{mddefbox}{%
  style=mdbox,
  linecolor=Dandelion,
  backgroundcolor=Dandelion!5,
}

\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{Dandelion!70!black},
  mdframed={style=mddefbox},
  bodyfont=\normalfont,
  spaceabove=2pt,
  spacebelow=1pt,
]{thmdefbox}

\mdfdefinestyle{mdcerubox}{%
  style=mdbox,
  linecolor=Cerulean,
  backgroundcolor=Cerulean!5,
}

\mdfdefinestyle{answerbox}{%
  style=mdbox,
  linecolor=YellowOrange,
  backgroundcolor=YellowOrange!5,
}

\mdfdefinestyle{remarkbox}{%
  style=mdbox,
  linecolor=WildStrawberry,
  backgroundcolor=WildStrawberry!5,
}

\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{Cerulean!70!black},
  bodyfont=\normalfont,
  spaceabove=2pt,
  spacebelow=1pt,
  mdframed={style=mdcerubox},
]{thmcerubox}

\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{YellowOrange!70!black},
  bodyfont=\normalfont,
  spaceabove=2pt,
  spacebelow=1pt,
  mdframed={style=answerbox},
]{answerhead}

\declaretheoremstyle[
  % headfont=\color{blue!40!black}\normalfont\bfseries,
  headfont=\color{BrickRed}\sffamily\bfseries,
  spaceabove=2pt,
  spacebelow=1pt,
  bodyfont=\normalfont
]{basehead}

\declaretheoremstyle[
  % headfont=\color{blue!40!black}\normalfont\bfseries,
  headfont=\color{Black}\sffamily\bfseries,
  spaceabove=2pt,
  spacebelow=1pt,
  bodyfont=\normalfont
]{normhead}

\declaretheoremstyle[
  headfont=\color{WildStrawberry}\sffamily\bfseries,
  spaceabove=2pt,
  spacebelow=1pt,
  bodyfont=\normalfont,
]{remarkhead}

\newcommand{\listhack}{$\empty$\vspace{-2em}}

\theoremstyle{definition}
% \declaretheorem[style=thmbluebox,name=Theorem,numberwithin=section]{cstheorem}
\declaretheorem[style=thmbluebox,name=Theorem]{theorem}
\declaretheorem[style=thmbluebox,name=Theorem,numbered=no]{theorem*}
\declaretheorem[style=basehead,name=Problem,sibling=theorem]{problem}
\declaretheorem[style=basehead,name=Problem,numbered=no]{problem*}


\declaretheorem[style=thmcerubox,name=Lemma,sibling=theorem,numberwithin=problem]{lemma}
\declaretheorem[style=thmcerubox,name=Lemma,numbered=no]{lemma*}


\declaretheorem[style=thmbluebox,name=Corollary,sibling=theorem]{corollary}
\declaretheorem[style=thmbluebox,name=Corollary,numbered=no]{corollary*}

\declaretheorem[style=thmcerubox,name=Assumption,sibling=theorem]{assume}
\declaretheorem[style=thmcerubox,name=Assumption,numbered=no]{assume*}

\declaretheorem[style=thmgreenbox,name=Algorithm,sibling=theorem]{algo}
\declaretheorem[style=thmgreenbox,name=Algorithm,numbered=no]{algo*}

\declaretheorem[style=thmredbox,name=Example,sibling=theorem]{example}
\declaretheorem[style=thmredbox,name=Example,numbered=no]{example*}

\declaretheorem[style=normhead,name=Answer,numberwithin=problem]{answer}
\declaretheorem[style=normhead,name=Answer,numbered=no]{answer*}
\declaretheorem[style=answerhead,name=Fact,numberwithin=problem]{fact}
\declaretheorem[style=answerhead,name=Fact,numbered=no]{fact*}

\declaretheorem[style=thmdefbox,name=Conjecture,sibling=theorem]{conjecture}
\declaretheorem[style=thmdefbox,name=Conjecture,numbered=no]{conjecture*}
\declaretheorem[style=thmdefbox,name=Definition,sibling=theorem]{definition}
\declaretheorem[style=thmdefbox,name=Definition,numbered=no]{definition*}

\declaretheorem[style=basehead,name=Exercise,sibling=theorem]{exercise}
\declaretheorem[style=basehead,name=Exercise,numbered=no]{exercise*}
\declaretheorem[style=basehead,name=Question,sibling=theorem]{ques}
\declaretheorem[style=basehead,name=Question,numbered=no]{ques*}

\declaretheorem[style=thmgreenbox,name=Proposition,numberwithin=problem]{proposition}
% \declaretheorem[style=thmbluebox,name=Proposition,sibling=theorem]{proposition}
\declaretheorem[style=thmgreenbox,name=Proposition,numbered=no]{proposition*}

\declaretheorem[style=thmgreenbox,name=Claim,numberwithin=problem]{claim}
\declaretheorem[style=thmgreenbox,name=Claim,numbered=no]{claim*}

\declaretheorem[style=remarkhead,name=Remark,numberwithin=problem]{remark}
\declaretheorem[style=remarkhead,name=Remark,numbered=no]{remark*}

\makeatletter
\newenvironment{solution}{\renewcommand{\proofname}{Solution}\begin{proof}\renewcommand{\proofname}{Proof}}{\renewcommand\qedsymbol{$\blacksquare$}\end{proof}}
\newenvironment{Solution}[1][\proofname]{\renewcommand{\proofname}{Solution}\proof[\normalfont\sffamily\bfseries #1]\renewcommand{\proofname}{Proof}}{\renewcommand\qedsymbol{$\blacksquare$}\endproof}
\newenvironment{Proof}[1][\proofname]{\renewcommand\qedsymbol{$\square$}\renewcommand{\proofname}{Proof}\proof[\normalfont\sffamily\bfseries #1]}{\endproof}
\makeatother

%% IMPORTANT: below should be at the end of the file and order should be preserved.
\usepackage{unicode-math}
\usepackage{mathtools}
\setmathfont{NewCMMath-Regular.otf}
\usepackage[new]{old-arrows}
\usepackage[allcommands]{overarrows}
\renewcommand{\emptyset}{\diameter}
\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n}

\newcommand{\cem}[1]{\emph{\textcolor{Maroon}{#1}}}
\newcommand{\ceg}[1]{\emph{\textcolor{ForestGreen}{#1}}}

\tcbset{highlight math style={enhanced,colframe=black,colback=white,arc=4pt,boxrule=0.6pt}}
\newcommand{\ctb}[2]{\tcbox[on line,boxsep=4pt,boxrule=0.6pt,left=0pt,right=0pt,top=0pt,bottom=0pt,colback=#1,highlight math style={enhanced}]{#2}}
\newcommand{\cmb}[2]{\tcbhighmath[on line,boxsep=4pt,boxrule=0.6pt,left=0pt,right=0pt,top=0pt,bottom=0pt,colback=#1,highlight math style={enhanced}]{#2}}
\newcommand{\myfbox}[2]{\textcolor{#1}{\fbox{\normalcolor#2}}}
\newcommand{\stirlingI}[2]{\genfrac{[}{]}{0pt}{}{#1}{#2}}
\newcommand{\stirlingII}[2]{\genfrac{\{}{\}}{0pt}{}{#1}{#2}}
\newcommand{\stirlingIII}[2]{\genfrac{\lBrack}{\rBrack}{0pt}{}{#1}{#2}}
\newcommand{\eulerianI}[2]{\genfrac{\langle}{\rangle}{0pt}{}{#1}{#2}}
\newcommand{\eulerianII}[2]{\genfrac{\lAngle}{\rAngle}{0pt}{}{#1}{#2}}
\newcommand{\dstirlingI}[2]{\genfrac{[}{]}{0pt}{0}{#1}{#2}}
\newcommand{\dstirlingII}[2]{\genfrac{\{}{\}}{0pt}{0}{#1}{#2}}
\newcommand{\dstirlingIII}[2]{\genfrac{\lBrack}{\rBrack}{0pt}{0}{#1}{#2}}
\newcommand{\deulerianI}[2]{\genfrac{\langle}{\rangle}{0pt}{0}{#1}{#2}}
\newcommand{\deulerianII}[2]{\genfrac{\lAngle}{\rAngle}{0pt}{0}{#1}{#2}}

\newcommand{\tstirlingI}[2]{\genfrac{[}{]}{0pt}{1}{#1}{#2}}
\newcommand{\tstirlingII}[2]{\genfrac{\{}{\}}{0pt}{1}{#1}{#2}}
\newcommand{\tstirlingIII}[2]{\genfrac{\lBrack}{\rBrack}{0pt}{1}{#1}{#2}}
\newcommand{\teulerianI}[2]{\genfrac{\langle}{\rangle}{0pt}{1}{#1}{#2}}
\newcommand{\teulerianII}[2]{\genfrac{\lAngle}{\rAngle}{0pt}{1}{#1}{#2}}

\newcommand{\nsubg}{\mathrel{\lhd}}
\newcommand{\nsubgeq}{\mathrel{\trianglelefteq}}
\newcommand{\nnsubg}{\mathrel{\ntriangleleft}}
\newcommand{\nnsubgeq}{\mathrel{\ntrianglelefteq}}
\newcommand{\nsupg}{\mathrel{\rhd}}
\newcommand{\nsupgeq}{\mathrel{\trianglerighteq}}
\newcommand{\nnsupg}{\mathrel{\ntriangleright}}
\newcommand{\nnsupgeq}{\mathrel{\ntrianglerighteq}}
\newcommand{\sq}[1]{\ensuremath{#1 \times #1}}

\usepackage{xparse}
\makeatletter
\newcommand{\raisemath}[1]{\mathpalette{\raisem@th{#1}}}% \raisemath{<len>}{...}
\newcommand{\raisem@th}[3]{\raisebox{#1}{$#2#3$}}
\def\mathcolor#1#{\@mathcolor{#1}}
\def\@mathcolor#1#2#3{%
  \protect\leavevmode
  \begingroup\color#1{#2}#3\endgroup
}
\makeatother

\newcommand{\newhbar}[3]{% \newhbar[<horz len>][<vert len>]
  \ensuremath{\mathrlap{\raisemath{#2}{\hspace*{#1}{\mathchar"AF\mkern-9mu}}}#3}%
}
\newcommand{\hsbar}{\newhbar{0pt}{-0.7pt}{h}}
\newcommand{\dsbar}{\newhbar{2pt}{-0.7pt}{d}}


\newcommand{\phiv}{\varphi}
\NewOverArrowCommand{overhookleft}{start=\lhook, end=\rightarrow, middle=\relbar, trim start=0, trim end=3, trim middle=5,}

%% centernot + mathunicode breaks things
%% \usepackage{centernot}
\makeatletter
\def\@nll#1#2{\m@th\ooalign{\hfil$#1#2$\hfil\cr\hfil$#1/$\hfil\cr}}
\newcommand{\nll}{\mathrel{\mathpalette\@nll{\ll}}}
\newcommand{\ngg}{\mathrel{\mathpalette\@nll{\gg}}}
\newcommand{\varnmid}{\mathrel{\mathpalette\@nll{\mid}}}
\makeatother
